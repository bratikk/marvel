var q=Object.defineProperty;var A=(s,r,t)=>r in s?q(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t;var T=(s,r,t)=>(A(s,typeof r!="symbol"?r+"":r,t),t);import{g as V,j as e,r as l}from"./index-bmDqCmmW.js";import{u as y}from"./MarvelService-J1f3V5b-.js";import{S as C}from"./Spinner-_wV23NAf.js";import{E as v}from"./ErrorMessage-59XYnF5m.js";var E={exports:{}},B="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",U=B,$=U;function I(){}function R(){}R.resetWarningCache=I;var H=function(){function s(a,c,m,o,i,d){if(d!==$){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}s.isRequired=s;function r(){return s}var t={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:r,element:s,elementType:s,instanceOf:r,node:s,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:R,resetWarningCache:I};return t.PropTypes=t,t};E.exports=H();var K=E.exports;const F=V(K),Y=()=>e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"char__select",children:"Please select a character to see information"}),e.jsxs("div",{className:"skeleton",children:[e.jsxs("div",{className:"pulse skeleton__header",children:[e.jsx("div",{className:"pulse skeleton__circle"}),e.jsx("div",{className:"pulse skeleton__mini"})]}),e.jsx("div",{className:"pulse skeleton__block"}),e.jsx("div",{className:"pulse skeleton__block"}),e.jsx("div",{className:"pulse skeleton__block"})]})]}),P=s=>{const[r,t]=l.useState(null),{loading:a,error:c,getCharacter:m}=y();l.useEffect(()=>{o()},[s.charId]);const o=()=>{const{charId:j}=s;j&&m(j).then(i)},i=j=>{t(j)},d=a?e.jsx(C,{}):null,h=c?e.jsx(v,{}):null,x=r||a||c?null:e.jsx(Y,{}),u=a||c||!r?null:e.jsx(z,{char:r});return e.jsxs("div",{className:"char__info",children:[x,h,d,u]})},z=({char:s})=>{const{name:r,description:t,thumbnail:a,homepage:c,wiki:m,comics:o}=s;let i={objectFit:"cover"};return a==="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"&&(i={objectFit:"contain"}),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"char__basics",children:[e.jsx("img",{src:a,alt:r,style:i}),e.jsxs("div",{children:[e.jsx("div",{className:"char__info-name",children:r}),e.jsxs("div",{className:"char__btns",children:[e.jsx("a",{href:c,className:"button button__main",children:e.jsx("div",{className:"inner",children:"homepage"})}),e.jsx("a",{href:m,className:"button button__secondary",children:e.jsx("div",{className:"inner",children:"Wiki"})})]})]})]}),e.jsx("div",{className:"char__descr",children:t}),e.jsx("div",{className:"char__comics",children:"Comics:"}),e.jsxs("ul",{className:"char__comics-list",children:[o.length>0?null:"There is no comics with this character",o.map((d,h)=>{if(!(h>9))return e.jsx("li",{className:"char__comics-item",children:d.name},h)})]})]})};P.propTypes={charId:F.number};const L=s=>{const[r,t]=l.useState(210),[a,c]=l.useState([]),[m,o]=l.useState(!1),[i,d]=l.useState(!1),{loading:h,error:x,getAllCharacters:u}=y();l.useEffect(()=>{j(r,!0)},[]);const j=(p,_)=>{d(!_),u(p).then(w)},w=p=>{let _=!1;p.length<9&&(_=!0),o(n=>_),t(n=>n+9),d(n=>!1),c(n=>[...n,...p])},f=l.useRef([]),k=p=>{f.current.forEach(_=>_.classList.remove("char__item_selected")),f.current[p].classList.add("char__item_selected"),f.current[p].focus()};function O(p){const _=p.map((n,b)=>{let S={objectFit:"cover"};return n.thumbnail==="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"&&(S={objectFit:"unset"}),e.jsxs("li",{tabIndex:0,className:"char__item",ref:g=>f.current[b]=g,onClick:()=>{s.onCharSelected(n.id),k(b)},onKeyPress:g=>{(g.key===" "||g.key==="Enter")&&(s.onCharSelected(n.id),k(b))},children:[e.jsx("img",{src:n.thumbnail,alt:n.name,style:S}),e.jsx("div",{className:"char__name",children:n.name})]},n.id)});return e.jsx("ul",{className:"char__grid",children:_})}const M=O(a),W=x?e.jsx(v,{}):null,D=h&&!i?e.jsx(C,{}):null;return e.jsxs("div",{className:"char__list",children:[M,D,W,e.jsx("button",{disabled:i,onClick:()=>j(r),className:"button button__main button__long",style:{display:m?"none":"block"},children:e.jsx("div",{className:"inner",children:"load more"})})]})};L.propTypes={onCharSelected:F.func.isRequired};class N extends l.Component{constructor(){super(...arguments);T(this,"state",{error:!1})}componentDidCatch(t,a){console.log(t,a),this.setState({error:!0})}render(){return this.state.error?e.jsx(v,{}):this.props.children}}const G="/assets/mjolnir-INfNpeFo.png",J=()=>{const[s,r]=l.useState(null),{loading:t,error:a,getCharacter:c,clearError:m}=y();l.useEffect(()=>{i();const u=setInterval(i,6e4);return()=>{clearInterval(u)}},[]);const o=u=>{r(u)},i=()=>{m();const u=Math.floor(Math.random()*400)+1011e3;c(u).then(o)},d=a?e.jsx(v,{}):null,h=t?e.jsx(C,{}):null,x=t||a||!s?null:e.jsx(Q,{char:s});return e.jsxs("div",{className:"randomchar",children:[d,h,x,e.jsxs("div",{className:"randomchar__static",children:[e.jsxs("p",{className:"randomchar__title",children:["Random character for today!",e.jsx("br",{}),"Do you want to get to know him better?"]}),e.jsx("p",{className:"randomchar__title",children:"Or choose another one"}),e.jsx("button",{onClick:i,className:"button button__main",children:e.jsx("div",{className:"inner",children:"try it"})}),e.jsx("img",{src:G,alt:"mjolnir",className:"randomchar__decoration"})]})]})},Q=({char:s})=>{const{name:r,description:t,thumbnail:a,homepage:c,wiki:m}=s;let o={objectFit:"cover"};return a==="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"&&(o={objectFit:"contain"}),e.jsxs("div",{className:"randomchar__block",children:[e.jsx("img",{src:a,alt:"Random character",className:"randomchar__img",style:o}),e.jsxs("div",{className:"randomchar__info",children:[e.jsx("p",{className:"randomchar__name",children:r}),e.jsx("p",{className:"randomchar__descr",children:t}),e.jsxs("div",{className:"randomchar__btns",children:[e.jsx("a",{href:c,className:"button button__main",children:e.jsx("div",{className:"inner",children:"homepage"})}),e.jsx("a",{href:m,className:"button button__secondary",children:e.jsx("div",{className:"inner",children:"Wiki"})})]})]})]})},X="/assets/vision-72nThoA5.png",ae=()=>{const[s,r]=l.useState(null),t=a=>{r(a)};return e.jsxs(e.Fragment,{children:[e.jsx(N,{children:e.jsx(J,{})}),e.jsxs("div",{className:"char__content",children:[e.jsx(N,{children:e.jsx(L,{onCharSelected:t})}),e.jsx(N,{children:e.jsx(P,{charId:s})})]}),e.jsx("img",{className:"bg-decoration",src:X,alt:"vision"})]})};export{ae as default};
